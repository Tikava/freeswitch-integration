import { AsyncWriteStream } from "./stream";

export function getCallbackWriteStream<T>(
  fn: (item: T, resolve: (error?: Error) => void) => void
): AsyncWriteStream<T> {
  return {
    write(input: T): Promise<void> {
      return new Promise<void>((resolve, reject) => {
        fn(input, (err) => {
          if (err) {
            reject(err);
          } else {
            resolve();
          }
        });
      });
    },
  };
}
